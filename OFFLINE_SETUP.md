# AI è¯­éŸ³åŠ©æ‰‹ - ç¦»çº¿ç‰ˆæœ¬éƒ¨ç½²æŒ‡å—

## ä¸€ã€å®‰è£…ä¾èµ–

### 1. å®‰è£… Python ä¾èµ–
```bash
pip install -r requirements_offline.txt
```

### 2. é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½ Whisper æ¨¡å‹
- æ¨¡å‹å¤§å°ï¼šbase (~140MB)
- ä¸‹è½½ä½ç½®ï¼š`~/.cache/huggingface/`
- é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œè¯·è€å¿ƒç­‰å¾…

## äºŒã€å¯åŠ¨æœåŠ¡

### Windows
```bash
start_offline.bat
```

### Linux/Mac
```bash
python ai_voice_service_offline.py
```

## ä¸‰ã€åŠŸèƒ½è¯´æ˜

### âœ… å®Œå…¨ç¦»çº¿è¿è¡Œ
- **ASRï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰**: faster-whisperï¼ˆæœ¬åœ° Whisper æ¨¡å‹ï¼‰
- **TTSï¼ˆè¯­éŸ³åˆæˆï¼‰**: pyttsx3ï¼ˆç³»ç»Ÿè‡ªå¸¦ TTS å¼•æ“ï¼‰
- **LLMï¼ˆå¯¹è¯æ¨¡å‹ï¼‰**: Ollamaï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰

### ğŸ“Š æ€§èƒ½å‚æ•°
- **Whisper æ¨¡å‹**: baseï¼ˆå‡†ç¡®åº¦å’Œé€Ÿåº¦å¹³è¡¡ï¼‰
- **è¯†åˆ«è¯­è¨€**: ä¸­æ–‡
- **TTS è¯­é€Ÿ**: 150ï¼ˆå¯è°ƒæ•´ï¼‰

## å››ã€æ¨¡å‹é€‰æ‹©

å¦‚æœéœ€è¦æ›´é«˜å‡†ç¡®åº¦ï¼Œå¯ä»¥ä¿®æ”¹ `ai_voice_service_offline.py`ï¼š

```python
WHISPER_MODEL = "small"  # æ›´å‡†ç¡®ï¼Œä½†æ›´æ…¢
# å¯é€‰: tiny, base, small, medium, large
```

| æ¨¡å‹ | å¤§å° | é€Ÿåº¦ | å‡†ç¡®åº¦ |
|------|------|------|--------|
| tiny | 75MB | æœ€å¿« | è¾ƒä½ |
| base | 140MB | å¿« | ä¸­ç­‰ |
| small | 460MB | ä¸­ç­‰ | è¾ƒé«˜ |
| medium | 1.5GB | æ…¢ | é«˜ |
| large | 3GB | å¾ˆæ…¢ | æœ€é«˜ |

## äº”ã€æ•…éšœæ’æŸ¥

### 1. Whisper æ¨¡å‹ä¸‹è½½å¤±è´¥
```bash
# æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹
pip install huggingface-hub
python -c "from faster_whisper import WhisperModel; WhisperModel('base')"
```

### 2. TTS æ— å£°éŸ³ï¼ˆWindowsï¼‰
- ç¡®ä¿å®‰è£…äº† `pywin32`
- æ£€æŸ¥ç³»ç»ŸéŸ³é‡è®¾ç½®
- å°è¯•é‡å¯æœåŠ¡

### 3. å½•éŸ³æ— æ³•è¯†åˆ«
- æ£€æŸ¥æµè§ˆå™¨éº¦å…‹é£æƒé™
- ç¡®ä¿å½•éŸ³æ—¶é•¿ > 1ç§’
- æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤éŸ³é¢‘å¤§å°

## å…­ã€æ€§èƒ½ä¼˜åŒ–

### ä½¿ç”¨ GPU åŠ é€Ÿï¼ˆå¯é€‰ï¼‰
å¦‚æœæœ‰ NVIDIA GPUï¼š
```bash
pip install faster-whisper[gpu]
```

ä¿®æ”¹ä»£ç ï¼š
```python
whisper_model = WhisperModel(WHISPER_MODEL, device="cuda", compute_type="float16")
```

### å‡å°‘å†…å­˜å ç”¨
ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼š
```python
WHISPER_MODEL = "tiny"  # ä»… 75MB
```

## ä¸ƒã€æµ‹è¯•

### 1. å¥åº·æ£€æŸ¥
```bash
curl http://127.0.0.1:8001/health
```

### 2. æ–‡æœ¬æµ‹è¯•
```bash
curl -X POST http://127.0.0.1:8001/chat \
  -F "text=ä½ å¥½"
```

### 3. å‰ç«¯è®¿é—®
```
http://localhost:8000/ai_health_advisor/
```

## å…«ã€æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å¯åŠ¨è¾ƒæ…¢** - éœ€è¦ä¸‹è½½å’ŒåŠ è½½æ¨¡å‹
2. **è¯­éŸ³è¯†åˆ«éœ€è¦æ—¶é—´** - base æ¨¡å‹çº¦ 2-5 ç§’
3. **TTS è´¨é‡** - pyttsx3 ä½¿ç”¨ç³»ç»Ÿ TTSï¼Œè´¨é‡å–å†³äºç³»ç»Ÿ
4. **å†…å­˜å ç”¨** - Whisper base çº¦å ç”¨ 500MB å†…å­˜

## ä¹ã€å‡çº§åˆ°æ›´å¥½çš„ TTSï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æ›´è‡ªç„¶çš„ä¸­æ–‡è¯­éŸ³ï¼Œå¯ä»¥ä½¿ç”¨ï¼š
- **edge-tts**: å¾®è½¯ Edge TTSï¼ˆéœ€è¦ç½‘ç»œï¼‰
- **coqui-tts**: æœ¬åœ°ç¥ç»ç½‘ç»œ TTSï¼ˆéœ€è¦ GPUï¼‰

ä¿®æ”¹ `text_to_speech` å‡½æ•°å³å¯ã€‚

pip install faster-whisper pyttsx3 pywin32