# 删除内容清单

## 🗑️ 已删除的 HTML 结构

### 1. 顶部导航栏 (top-header)
```html
<!-- 已删除 -->
<div class="top-header">
    <div class="header-left">
        <div class="header-logo">
            <i class="fas fa-utensils"></i>
        </div>
        <div class="header-title">智慧餐饮</div>
    </div>
    <div class="header-right">
        <div class="header-icon" id="profileBtn">
            <i class="fas fa-user"></i>
        </div>
        <div class="header-icon">
            <i class="fas fa-bell"></i>
        </div>
    </div>
</div>
```

### 2. 快捷功能区 (function-card)
```html
<!-- 已删除 -->
<div class="function-card">
    <h2 class="function-title">
        <i class="fas fa-th-large"></i> 快捷功能
    </h2>
    <div class="function-grid">
        <!-- 8个功能按钮 -->
        <a href="javascript:void(0)" class="func-item">
            <div class="icon-wrapper icon-1">
                <i class="fas fa-utensils"></i>
            </div>
            <div class="func-label">智能点餐</div>
        </a>
        <!-- ... 其他7个功能项 ... -->
    </div>
</div>
```

**删除的功能项**：
1. 智能点餐 (icon-1)
2. 今日优惠 (icon-2)
3. 营养食谱 (icon-3)
4. 健康报告 (icon-4)
5. 预约取餐 (icon-5)
6. 历史订单 (icon-6)
7. 我的收藏 (icon-7)
8. 营养咨询 (icon-8)

### 3. 推荐菜品区 (recommend-section)
```html
<!-- 已删除 -->
<div class="recommend-section">
    <div class="food-card">
        <div class="food-header">
            <h2 class="food-title">
                <i class="fas fa-fire"></i> 智能推荐菜品
            </h2>
            <button class="view-more-btn" onclick="location.href='/orders/'">
                更多 <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="food-grid">
            {% for d in dishes %}
            <div class="food-item">
                <div class="food-img" style="background:url('{% static d.image_url %}') center/cover"></div>
                <div class="food-details">
                    <div class="food-name">{{ d.name }}</div>
                    <div class="food-info">
                        <div class="food-calories">
                            <i class="fas fa-fire"></i> 
                            {{ d.total_calorie }} kcal
                        </div>
                        <div class="food-price">¥{{ d.price }}</div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
```

## 🎨 已删除的 CSS 样式

### 1. 顶部导航栏样式
```css
/* 已删除 */
.top-header { ... }
.header-left { ... }
.header-right { ... }
.header-logo { ... }
.header-title { ... }
.header-icon { ... }
```

### 2. 功能区样式
```css
/* 已删除 */
.function-card { ... }
.function-title { ... }
.function-grid { ... }
.func-item { ... }
.icon-wrapper { ... }
.icon-1, .icon-2, .icon-3, .icon-4, .icon-5, .icon-6, .icon-7, .icon-8 { ... }
.func-label { ... }
```

### 3. 推荐菜品样式
```css
/* 已删除 */
.recommend-section { ... }
.food-card { ... }
.food-header { ... }
.food-title { ... }
.food-grid { ... }
.food-item { ... }
.food-img { ... }
.food-details { ... }
.food-name { ... }
.food-info { ... }
.food-price { ... }
.food-calories { ... }
.view-more-btn { ... }
```

### 4. 旧版营养卡片样式
```css
/* 已删除并重写 */
.nutrition-card::before { /* 旧版渐变条 */ }
.nutrition-header { /* 旧版头部 */ }
.nutrition-title { /* 旧版标题 */ }
.date-selector { /* 旧版日期选择器 */ }
.calories-section { /* 旧版热量区 */ }
.progress-header { /* 旧版进度头部 */ }
.progress-container { /* 旧版进度容器 */ }
.progress-bar { /* 旧版进度条 */ }
.progress-value { /* 旧版进度值 */ }
.nutrient-grid { /* 旧版网格 */ }
.nutrient-item { /* 旧版营养项 */ }
.nutrient-name { /* 旧版营养名称 */ }
.nutrient-value { /* 旧版营养值 */ }
```

## 📜 已删除的 JavaScript 代码

### 1. 顶部个人按钮事件
```javascript
/* 已删除 */
document.getElementById('profileBtn').addEventListener('click', function() {
    window.location.href = '/profile/';
});
```

### 2. 快捷功能跳转逻辑
```javascript
/* 已删除 */
document.querySelectorAll('.func-item').forEach(item=>{
    const l=item.querySelector('.func-label')?.textContent.trim();
    if(l==='智能点餐') item.addEventListener('click',()=>location.href='/orders/');
    else if(l==='历史订单') item.addEventListener('click',()=>location.href='/order_history/');
    else if (l==='营养咨询') item.addEventListener('click',()=>location.href='/ai_health_advisor');
    else if(l==='健康报告') item.addEventListener('click',()=>location.href='/repo/');
    else if(l==='我的收藏') item.addEventListener('click',()=>location.href='/Collection/');
    else if(l==='营养食谱') item.addEventListener('click',()=>location.href='/nutrition_recipes/');
});
```

## 🔗 已删除的后端数据依赖

### 1. 推荐菜品数据
```python
# views.py 中的数据（前端不再使用）
recommendations = personalized(user_id)
dishes = Dishes.objects.filter(dish_id__in=recommendations[0]["dish_id_arr"])[:4]

# 模板变量（已不再传递到前端）
'dishes': dishes,  # ❌ 已删除
```

**注意**: 后端仍然计算推荐菜品，但前端不再显示。如需完全优化，可在 `views.py` 中注释掉相关代码：

```python
# 可选优化：注释掉推荐菜品计算
# recommendations = personalized(user_id)
# dishes = Dishes.objects.filter(dish_id__in=recommendations[0]["dish_id_arr"])[:4]

return render(request, 'index.html', {
    # 'dishes': dishes,  # ❌ 已删除
    'today': today,
    'today_total': totals,
})
```

## 📊 删除统计

### HTML 结构
| 删除项 | 行数 | 节点数 |
|--------|------|--------|
| 顶部导航栏 | ~15 | ~8 |
| 快捷功能区 | ~80 | ~40 |
| 推荐菜品区 | ~50 | ~30 |
| **总计** | **~145** | **~78** |

### CSS 样式
| 删除项 | 规则数 | 行数 |
|--------|--------|------|
| 顶部导航栏样式 | ~8 | ~50 |
| 功能区样式 | ~15 | ~120 |
| 推荐菜品样式 | ~18 | ~150 |
| 旧版营养卡片样式 | ~20 | ~180 |
| **总计** | **~61** | **~500** |

### JavaScript 代码
| 删除项 | 函数数 | 行数 |
|--------|--------|------|
| 顶部按钮事件 | 1 | ~3 |
| 快捷功能跳转 | 1 | ~8 |
| **总计** | **2** | **~11** |

## 🎯 删除原因说明

### 1. 顶部导航栏
- **原因**: 页面已精简为单一模块，不需要额外导航
- **替代方案**: 底部导航栏提供页面跳转功能

### 2. 快捷功能区
- **原因**: 违反"仅保留营养摄入模块"的强制规则
- **影响**: 用户需通过底部导航访问其他功能
- **优势**: 页面更专注，减少干扰

### 3. 推荐菜品区
- **原因**: 不属于营养摄入模块
- **影响**: 用户需访问点餐页面查看推荐
- **优势**: 减少首屏加载时间

### 4. 旧版营养卡片样式
- **原因**: 替换为现代化液态玻璃设计
- **改进**: 
  - 更好的视觉层次
  - 更流畅的动画效果
  - 更清晰的数据展示

## ✅ 保留的内容

### 1. 营养摄入卡片 (nutrition-card)
✅ **完整保留并优化**
- 热量环形进度图
- 营养素详细数据
- 状态指示器

### 2. 底部导航栏 (bottom-nav)
✅ **保留**
- 主页
- 点餐
- 报告
- AI助手

### 3. 后端数据接口
✅ **保留**
- `today_total` 营养汇总数据
- `today` 日期数据

## 🔄 迁移路径

如果用户需要访问已删除的功能：

| 原功能 | 新访问路径 |
|--------|-----------|
| 智能点餐 | 底部导航 → 点餐 |
| 今日优惠 | 点餐页面内 |
| 营养食谱 | 点餐页面内 |
| 健康报告 | 底部导航 → 报告 |
| 预约取餐 | 点餐页面内 |
| 历史订单 | 个人中心 |
| 我的收藏 | 个人中心 |
| 营养咨询 | 底部导航 → AI助手 |
| 推荐菜品 | 点餐页面 |
| 个人中心 | 需添加入口（建议在底部导航） |
| 通知 | 需添加入口（建议在其他页面） |

## 📝 后续优化建议

### 1. 后端优化
```python
# views.py - 可选优化
def index(request):
    user = getUserSession(request)
    today = timezone.localdate()
    
    # 只查询营养数据，不查询推荐菜品
    orders = Orders.objects.filter(user_id=user["user_id"], order_time__date=today)
    order_items = OrderItems.objects.filter(order__in=orders)
    
    totals = Dishes.objects.filter(orderitems__in=order_items).aggregate(
        calorie=Coalesce(Sum('total_calorie'), Value(0)),
        protein=Coalesce(Sum('total_protein'), Value(0)),
        fat=Coalesce(Sum('total_fat'), Value(0)),
        carbohydrate=Coalesce(Sum('total_carbohydrate'), Value(0)),
        fiber=Coalesce(Sum('total_fiber'), Value(0)),
    )
    
    return render(request, 'index.html', {
        'today': today,
        'today_total': totals,
    })
```

### 2. 性能提升
- 减少数据库查询（不查询推荐菜品）
- 减少模板渲染时间
- 减少首屏加载资源

---

**删除完成时间**: 2026-01-25  
**删除内容**: 3个主要模块 + 相关样式和脚本  
**代码减少**: ~650 行  
**状态**: ✅ 清理完成
