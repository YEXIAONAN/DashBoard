# Toast通知系统测试指南

## 快速测试步骤

### 1. 启动服务器
```bash
cd DashBoard
python manage.py runserver
```

### 2. 测试登录页面Toast通知

**访问**: http://localhost:8000/login/

**测试场景1 - 错误提示**:
1. 输入错误的手机号: `12345678901`
2. 输入任意密码
3. 点击"登录"按钮
4. **预期结果**: 看到Toast错误提示（红色），而不是alert弹窗

**测试场景2 - 网络错误**:
1. 断开网络连接
2. 尝试登录
3. **预期结果**: 看到Toast错误提示"登录失败，请稍后再试"

### 3. 测试个人中心Toast通知

**访问**: http://localhost:8000/profile/

**测试场景 - 退出登录错误**:
1. 先正常登录
2. 在开发者工具中模拟网络错误（Network → Offline）
3. 点击"退出登录"
4. **预期结果**: 看到Toast错误提示

### 4. 测试点餐页面Toast通知

**访问**: http://localhost:8000/orders/

**测试场景 - 添加到购物车**:
1. 浏览菜品列表
2. 点击任意菜品的"加入购物车"按钮
3. **预期结果**: 看到Toast成功提示（绿色）

### 5. 验证Toast样式

**检查项**:
- ✅ Toast出现在屏幕右上角
- ✅ 有平滑的滑入动画
- ✅ 3秒后自动消失
- ✅ 可以手动点击关闭按钮
- ✅ 多个Toast会堆叠显示
- ✅ 移动端显示正常（宽度适配）

### 6. Toast类型对比

| 类型 | 颜色 | 图标 | 使用场景 |
|------|------|------|----------|
| success | 绿色 | ✓ | 操作成功 |
| error | 红色 | ✗ | 操作失败 |
| warning | 橙色 | ⚠ | 警告信息 |
| info | 蓝色 | ℹ | 一般信息 |

## 开发者测试

### 在浏览器控制台测试Toast

打开任意页面，按F12打开控制台，输入：

```javascript
// 测试成功提示
Toast.show('这是成功提示！', 'success');

// 测试错误提示
Toast.show('这是错误提示！', 'error');

// 测试警告提示
Toast.show('这是警告提示！', 'warning');

// 测试信息提示
Toast.show('这是信息提示！', 'info');

// 测试长文本
Toast.show('这是一条很长很长很长很长很长很长的提示消息，用来测试文本换行效果。', 'info');

// 测试自定义持续时间（5秒）
Toast.show('这条消息5秒后消失', 'success', 5000);

// 测试多个Toast堆叠
Toast.show('第一条消息', 'success');
setTimeout(() => Toast.show('第二条消息', 'info'), 500);
setTimeout(() => Toast.show('第三条消息', 'warning'), 1000);
```

## 对比测试

### 旧方式 (alert)
```javascript
alert('操作成功！');
```
**缺点**:
- ❌ 阻塞页面交互
- ❌ 样式无法自定义
- ❌ 用户体验差
- ❌ 无法显示多个消息

### 新方式 (Toast)
```javascript
Toast.show('操作成功！', 'success');
```
**优点**:
- ✅ 不阻塞页面
- ✅ 样式美观统一
- ✅ 用户体验好
- ✅ 支持多消息堆叠
- ✅ 自动消失
- ✅ 支持手动关闭

## 移动端测试

### 使用Chrome DevTools模拟移动设备

1. 按F12打开开发者工具
2. 点击"Toggle device toolbar"（Ctrl+Shift+M）
3. 选择设备：iPhone 12 Pro / iPad / Galaxy S20
4. 测试Toast在不同屏幕尺寸下的显示

**预期结果**:
- ✅ Toast宽度自适应
- ✅ 文字大小合适
- ✅ 触摸关闭按钮容易点击
- ✅ 不遮挡重要内容

## 无障碍测试

### 屏幕阅读器测试

**Windows**: 使用Narrator
1. 按Win+Ctrl+Enter启动Narrator
2. 触发Toast通知
3. **预期**: 屏幕阅读器会朗读Toast内容

**Mac**: 使用VoiceOver
1. 按Cmd+F5启动VoiceOver
2. 触发Toast通知
3. **预期**: VoiceOver会朗读Toast内容

### 键盘导航测试

1. 使用Tab键导航页面
2. 触发Toast通知
3. 按Esc键
4. **预期**: Toast应该关闭（如果实现了键盘支持）

## 性能测试

### 检查内存泄漏

1. 打开Chrome DevTools → Performance
2. 点击"Record"
3. 触发100个Toast通知
4. 停止录制
5. **检查**: 内存使用是否正常回收

### 检查动画性能

1. 打开Chrome DevTools → Performance
2. 启用"Screenshots"
3. 触发Toast通知
4. **检查**: FPS是否保持在60fps

## 常见问题排查

### Toast不显示

**可能原因**:
1. ❌ toast.js未加载
   - **解决**: 检查浏览器控制台是否有404错误
   
2. ❌ components.css未加载
   - **解决**: 检查Toast样式是否存在

3. ❌ JavaScript错误
   - **解决**: 检查控制台是否有错误信息

### Toast样式异常

**可能原因**:
1. ❌ CSS冲突
   - **解决**: 检查是否有其他CSS覆盖了Toast样式

2. ❌ z-index问题
   - **解决**: Toast的z-index应该是9999

### Toast不自动消失

**可能原因**:
1. ❌ setTimeout未执行
   - **解决**: 检查JavaScript是否有错误

2. ❌ 持续时间设置错误
   - **解决**: 确认duration参数正确

## 浏览器兼容性测试

### 测试浏览器列表

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

### 测试项目

1. **CSS动画**: 滑入/滑出效果
2. **Flexbox布局**: Toast内容排列
3. **CSS变量**: 颜色主题
4. **JavaScript**: Toast类和方法

## 回归测试清单

在每次修改后，确认以下功能正常：

- [ ] Toast能正常显示
- [ ] Toast能自动消失
- [ ] Toast能手动关闭
- [ ] 多个Toast能堆叠显示
- [ ] 4种类型的Toast样式正确
- [ ] 移动端显示正常
- [ ] 不影响页面其他功能
- [ ] 不影响页面性能
- [ ] 屏幕阅读器能读取内容
- [ ] 所有页面的Toast都正常工作

## 测试报告模板

```markdown
# Toast通知系统测试报告

**测试日期**: 2026-02-02
**测试人员**: [姓名]
**测试环境**: 
- 浏览器: Chrome 120
- 操作系统: Windows 11
- 屏幕分辨率: 1920x1080

## 测试结果

### 功能测试
- [x] 登录页面Toast - 通过
- [x] 个人中心Toast - 通过
- [x] 点餐页面Toast - 通过
- [x] 多Toast堆叠 - 通过
- [x] 自动消失 - 通过
- [x] 手动关闭 - 通过

### 样式测试
- [x] 成功Toast（绿色）- 通过
- [x] 错误Toast（红色）- 通过
- [x] 警告Toast（橙色）- 通过
- [x] 信息Toast（蓝色）- 通过

### 响应式测试
- [x] 桌面端 - 通过
- [x] 平板端 - 通过
- [x] 移动端 - 通过

### 无障碍测试
- [x] 屏幕阅读器 - 通过
- [x] ARIA标签 - 通过

### 性能测试
- [x] 内存使用 - 正常
- [x] 动画流畅度 - 60fps

## 发现的问题
无

## 建议
Toast系统运行良好，建议投入生产使用。
```

## 总结

Toast通知系统已成功集成到所有主要页面，提供了比alert()更好的用户体验。通过以上测试步骤，可以全面验证Toast系统的功能、样式、性能和无障碍性。

**测试重点**:
1. ✅ 功能完整性
2. ✅ 用户体验
3. ✅ 视觉一致性
4. ✅ 响应式设计
5. ✅ 无障碍支持
6. ✅ 性能表现

祝测试顺利！🎉
