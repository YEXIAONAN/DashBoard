# å¤šè¯­è¨€æ”¯æŒæ–‡æ¡£ / Multilingual Support Documentation

## æ¦‚è¿° / Overview

AI è¯­éŸ³åŠ©æ‰‹ç°å·²æ”¯æŒå¤šè¯­è¨€åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸­æ–‡ã€è‹±æ–‡å’Œè¶Šå—è¯­ä¹‹é—´è‡ªç”±åˆ‡æ¢ã€‚

The AI voice assistant now supports multilingual functionality, allowing users to switch freely between Chinese, English, and Vietnamese.

## æ”¯æŒçš„è¯­è¨€ / Supported Languages

| è¯­è¨€ / Language | ä»£ç  / Code | è¯­éŸ³è¯†åˆ« / ASR | è¯­éŸ³åˆæˆ / TTS |
|----------------|-------------|---------------|---------------|
| ä¸­æ–‡ (Chinese) | `zh` | âœ… Whisper | âœ… æ™“æ™“ (XiaoxiaoNeural) |
| English | `en` | âœ… Whisper | âœ… Jenny (JennyNeural) |
| Tiáº¿ng Viá»‡t (Vietnamese) | `vi` | âœ… Whisper | âœ… Hoai My (HoaiMyNeural) |

## åŠŸèƒ½ç‰¹æ€§ / Features

### 1. è¯­éŸ³è¯†åˆ« (ASR)
- ä½¿ç”¨ OpenAI Whisper æ¨¡å‹è¿›è¡Œå¤šè¯­è¨€è¯­éŸ³è¯†åˆ«
- æ”¯æŒè‡ªåŠ¨è¯­è¨€æ£€æµ‹å’Œä¼˜åŒ–
- é’ˆå¯¹æ¯ç§è¯­è¨€ä½¿ç”¨ç‰¹å®šçš„æç¤ºè¯ä»¥æé«˜å‡†ç¡®åº¦

### 2. è¯­éŸ³åˆæˆ (TTS)
- ä½¿ç”¨ Microsoft Edge TTS è¿›è¡Œé«˜è´¨é‡è¯­éŸ³åˆæˆ
- æ¯ç§è¯­è¨€ä½¿ç”¨åŸç”Ÿå‘éŸ³äºº
- è‡ªç„¶æµç•…çš„è¯­éŸ³è¾“å‡º

### 3. å‰ç«¯ç•Œé¢
- ç›´è§‚çš„è¯­è¨€é€‰æ‹©ä¸‹æ‹‰èœå•
- å®æ—¶åˆ‡æ¢ï¼Œæ— éœ€åˆ·æ–°é¡µé¢
- æ ¹æ®é€‰æ‹©çš„è¯­è¨€è‡ªåŠ¨è°ƒæ•´æç¤ºæ–‡æœ¬

## ä½¿ç”¨æ–¹æ³• / Usage

### å‰ç«¯ä½¿ç”¨ / Frontend Usage

1. æ‰“å¼€ AI è¯­éŸ³åŠ©æ‰‹é¡µé¢
2. åœ¨å¯¹è¯æ¡†é¡¶éƒ¨æ‰¾åˆ°è¯­è¨€é€‰æ‹©å™¨
3. ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©æ‚¨æƒ³è¦çš„è¯­è¨€ï¼š
   - ä¸­æ–‡ (Chinese)
   - English
   - Tiáº¿ng Viá»‡t (Vietnamese)
4. å¼€å§‹ä½¿ç”¨æ–‡å­—æˆ–è¯­éŸ³è¾“å…¥è¿›è¡Œå¯¹è¯

### API è°ƒç”¨ / API Calls

#### è¯­éŸ³è¯†åˆ«æ¥å£ / Transcribe Endpoint

```bash
POST http://172.16.4.181:8001/transcribe
Content-Type: multipart/form-data

Parameters:
- audio: éŸ³é¢‘æ–‡ä»¶ (audio file)
- language: è¯­è¨€ä»£ç  (language code: zh/en/vi)
```

#### æµå¼å¯¹è¯æ¥å£ / Chat Stream Endpoint

```bash
POST http://172.16.4.181:8001/chat-stream
Content-Type: multipart/form-data

Parameters:
- text: è¾“å…¥æ–‡æœ¬ (input text)
- language: è¯­è¨€ä»£ç  (language code: zh/en/vi)
```

#### ç»Ÿä¸€èŠå¤©æ¥å£ / Chat Endpoint

```bash
POST http://172.16.4.181:8001/chat
Content-Type: multipart/form-data

Parameters:
- text: è¾“å…¥æ–‡æœ¬ (optional)
- audio: éŸ³é¢‘æ–‡ä»¶ (optional)
- language: è¯­è¨€ä»£ç  (language code: zh/en/vi, default: zh)
```

## æŠ€æœ¯å®ç° / Technical Implementation

### åç«¯ä¿®æ”¹ / Backend Changes

1. **transcribe_audio()** - æ·»åŠ  `language` å‚æ•°
   - æ”¯æŒ Whisper å¤šè¯­è¨€è¯†åˆ«
   - é’ˆå¯¹ä¸åŒè¯­è¨€ä½¿ç”¨ç‰¹å®šæç¤ºè¯

2. **text_to_speech()** - æ·»åŠ  `language` å‚æ•°
   - è¯­éŸ³æ˜ å°„è¡¨ï¼š
     - `zh` â†’ `zh-CN-XiaoxiaoNeural`
     - `en` â†’ `en-US-JennyNeural`
     - `vi` â†’ `vi-VN-HoaiMyNeural`

3. **API ç«¯ç‚¹æ›´æ–°**
   - `/transcribe` - æ¥å— `language` å‚æ•°
   - `/chat-stream` - æ¥å— `language` å‚æ•°
   - `/chat` - æ¥å— `language` å‚æ•°

### å‰ç«¯ä¿®æ”¹ / Frontend Changes

1. **UI ç»„ä»¶**
   - æ·»åŠ è¯­è¨€é€‰æ‹©ä¸‹æ‹‰èœå•
   - æ ·å¼ä¸ç°ä»£ä¸»é¢˜ä¿æŒä¸€è‡´

2. **çŠ¶æ€ç®¡ç†**
   - æ–°å¢ `currentLanguage` å˜é‡
   - é»˜è®¤å€¼ä¸º `'zh'`

3. **äº‹ä»¶å¤„ç†**
   - è¯­è¨€åˆ‡æ¢äº‹ä»¶ç›‘å¬å™¨
   - è‡ªåŠ¨æ›´æ–°è¾“å…¥æ¡†å ä½ç¬¦æ–‡æœ¬
   - åœ¨æ‰€æœ‰ API è°ƒç”¨ä¸­ä¼ é€’è¯­è¨€å‚æ•°

## é…ç½®è¯´æ˜ / Configuration

### Whisper æ¨¡å‹ / Whisper Model

å½“å‰ä½¿ç”¨ `small` æ¨¡å‹ï¼Œå¹³è¡¡äº†é€Ÿåº¦å’Œå‡†ç¡®åº¦ã€‚å¯ä»¥åœ¨ `ai_voice_service_offline.py` ä¸­ä¿®æ”¹ï¼š

```python
WHISPER_MODEL = "small"  # å¯é€‰: tiny, base, small, medium, large
```

### TTS è¯­éŸ³é€‰æ‹© / TTS Voice Selection

å¯ä»¥åœ¨ `text_to_speech()` å‡½æ•°ä¸­ä¿®æ”¹è¯­éŸ³æ˜ å°„ï¼š

```python
voice_map = {
    "zh": "zh-CN-XiaoxiaoNeural",  # å¯é€‰å…¶ä»–ä¸­æ–‡è¯­éŸ³
    "en": "en-US-JennyNeural",      # å¯é€‰å…¶ä»–è‹±æ–‡è¯­éŸ³
    "vi": "vi-VN-HoaiMyNeural"      # å¯é€‰å…¶ä»–è¶Šå—è¯­è¯­éŸ³
}
```

## æµ‹è¯•å»ºè®® / Testing Recommendations

1. **è¯­éŸ³è¯†åˆ«æµ‹è¯•**
   - æµ‹è¯•æ¯ç§è¯­è¨€çš„æ¸…æ™°å‘éŸ³
   - æµ‹è¯•å¸¦å£éŸ³çš„è¯­éŸ³
   - æµ‹è¯•å˜ˆæ‚ç¯å¢ƒä¸‹çš„è¯†åˆ«

2. **è¯­éŸ³åˆæˆæµ‹è¯•**
   - éªŒè¯æ¯ç§è¯­è¨€çš„å‘éŸ³è‡ªç„¶åº¦
   - æµ‹è¯•é•¿æ–‡æœ¬çš„åˆæˆè´¨é‡
   - æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦å’Œæ•°å­—çš„å¤„ç†

3. **åˆ‡æ¢æµ‹è¯•**
   - åœ¨å¯¹è¯ä¸­é—´åˆ‡æ¢è¯­è¨€
   - éªŒè¯çŠ¶æ€ä¿æŒæ­£ç¡®
   - æ£€æŸ¥ UI æ›´æ–°æ˜¯å¦åŠæ—¶

## æ•…éšœæ’é™¤ / Troubleshooting

### é—®é¢˜ï¼šè¯­éŸ³è¯†åˆ«ä¸å‡†ç¡®
**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®ä¿éº¦å…‹é£è´¨é‡è‰¯å¥½
- åœ¨å®‰é™ç¯å¢ƒä¸­å½•éŸ³
- æ¸…æ™°å‘éŸ³ï¼Œé¿å…è¿‡å¿«æˆ–è¿‡æ…¢

### é—®é¢˜ï¼šè¯­éŸ³åˆæˆå¤±è´¥
**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆEdge TTS éœ€è¦ç½‘ç»œï¼‰
- éªŒè¯è¯­è¨€ä»£ç æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

### é—®é¢˜ï¼šè¯­è¨€åˆ‡æ¢æ— æ•ˆ
**è§£å†³æ–¹æ¡ˆï¼š**
- åˆ·æ–°é¡µé¢é‡è¯•
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ

## æœªæ¥æ”¹è¿› / Future Improvements

- [ ] æ·»åŠ æ›´å¤šè¯­è¨€æ”¯æŒï¼ˆæ—¥è¯­ã€éŸ©è¯­ã€è¥¿ç­ç‰™è¯­ç­‰ï¼‰
- [ ] æ”¯æŒè‡ªåŠ¨è¯­è¨€æ£€æµ‹
- [ ] æ·»åŠ è¯­éŸ³é€Ÿåº¦å’ŒéŸ³è°ƒè°ƒèŠ‚
- [ ] æ”¯æŒå¤šç§è¯­éŸ³é€‰æ‹©ï¼ˆç”·å£°/å¥³å£°ï¼‰
- [ ] ç¦»çº¿ TTS æ”¯æŒ

## æ›´æ–°æ—¥å¿— / Changelog

### v1.1.0 (2026-01-31)
- âœ¨ æ–°å¢å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€è¶Šå—è¯­ï¼‰
- ğŸ¨ ä¼˜åŒ–è¯­è¨€é€‰æ‹©å™¨ UI
- ğŸ› ä¿®å¤è¯­éŸ³è¯†åˆ«è¯­è¨€å‚æ•°ä¼ é€’é—®é¢˜
- ğŸ“ æ·»åŠ å¤šè¯­è¨€æ–‡æ¡£

---

**ä½œè€… / Author:** AI Voice Service Team  
**æœ€åæ›´æ–° / Last Updated:** 2026-01-31
